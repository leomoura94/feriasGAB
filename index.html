<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Agendamento de Férias - 2026</title>
<style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    h1 { text-align: center; }
    .container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; }
    label { font-weight: bold; display: block; margin-top: 10px; }
    input, select, button { padding: 8px; margin-top: 5px; width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #eee; }
    .btn { cursor: pointer; border: none; border-radius: 5px; }
    .aprovado { background: green; color: white; }
    .negado { background: red; color: white; }
    .pendente { background: orange; color: white; }
</style>
</head>
<body>

<div class="container">
    <h1>Agendamento de Férias - 2026</h1>

    <div id="formulario">
        <label>Nome do Colaborador:</label>
        <select id="colaborador"></select>

        <label>Data de Início:</label>
        <input type="date" id="inicio">

        <label>Data de Fim:</label>
        <input type="date" id="fim">

        <button class="btn" onclick="agendarFerias()">Agendar</button>
    </div>

    <hr>

    <h2>Solicitações</h2>
    <table>
        <thead>
            <tr>
                <th>Colaborador</th>
                <th>Início</th>
                <th>Fim</th>
                <th>Status</th>
                <th>Ações (Supervisor)</th>
            </tr>
        </thead>
        <tbody id="listaFerias"></tbody>
    </table>

    <hr>

    <h2>Login Supervisor</h2>
    <input type="password" id="senhaSupervisor" placeholder="Senha do supervisor">
    <button onclick="loginSupervisor()">Entrar</button>
</div>

<script>
const colaboradores = [
    { nome: "ALEXANDRE RIBEIRO GUARANY LIRA", admissao: "2023-04-19" },
    { nome: "ALISON RODRIGO GOMES DA CRUZ", admissao: "2023-10-02" },
    { nome: "ANTONIO LEONARDO ROCHA", admissao: "2023-11-27" },
    { nome: "ARTHUR PEREIRA DA ROCHA", admissao: "2025-07-23" },
    { nome: "ESDRAS UCHOA PEDROSO", admissao: "2024-06-27" },
    { nome: "FELIPE AMAZONAS DE AZEVEDO", admissao: "2022-10-26" },
    { nome: "FELIPE CASTRO GOMES", admissao: "2022-07-11" },
    { nome: "GUSTAVO SOUZA AMARAL", admissao: "2023-07-03" },
    { nome: "JONAS SALLES PEREIRA", admissao: "2025-02-25" },
    { nome: "LEONARDO SOUZA DE OLIVEIRA MOURA", admissao: "2023-06-01" },
    { nome: "MAYARA DE SOUZA MARTINS", admissao: "2024-09-03" },
    { nome: "RAPHAEL RICARDO DE SOUZA BARROS", admissao: "2023-10-10" },
    { nome: "RENATA RODRIGUES GOMES", admissao: "2023-12-11" },
    { nome: "RODOLPHO MAGNUS ALVES LOPES", admissao: "2021-09-15" },
    { nome: "THAIS NUNES ALVES", admissao: "2021-01-11" },
    { nome: "THIAGO LUCENA CARVALHO", admissao: "2025-05-21" }
];

// Preenche o select
const selectColab = document.getElementById("colaborador");
colaboradores.forEach(c => {
    let opt = document.createElement("option");
    opt.value = c.nome;
    opt.textContent = c.nome;
    selectColab.appendChild(opt);
});

let ferias = JSON.parse(localStorage.getItem("ferias")) || [];
let supervisorLogado = false;

function salvar() {
    localStorage.setItem("ferias", JSON.stringify(ferias));
}

function renderFerias() {
    const tbody = document.getElementById("listaFerias");
    tbody.innerHTML = "";

    ferias.sort((a, b) => new Date(a.admissao) - new Date(b.admissao));

    ferias.forEach((f, idx) => {
        let tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${f.nome}</td>
            <td>${f.inicio}</td>
            <td>${f.fim}</td>
            <td class="${f.status.toLowerCase()}">${f.status}</td>
            <td>
                ${supervisorLogado && f.status === "Pendente" ?
                    `<button class="btn aprovado" onclick="aprovar(${idx})">Aprovar</button>
                     <button class="btn negado" onclick="negar(${idx})">Negar</button>` : ""}
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function verificaConflito(inicio, fim) {
    return ferias.some(f => {
        if (f.status === "Negado") return false;
        return (
            (inicio >= f.inicio && inicio <= f.fim) ||
            (fim >= f.inicio && fim <= f.fim) ||
            (inicio <= f.inicio && fim >= f.fim)
        );
    });
}

function agendarFerias() {
    const nome = selectColab.value;
    const inicio = document.getElementById("inicio").value;
    const fim = document.getElementById("fim").value;
    const admissao = colaboradores.find(c => c.nome === nome).admissao;

    if (!inicio || !fim) {
        alert("Preencha as datas.");
        return;
    }

    if (verificaConflito(inicio, fim)) {
        alert("Já existe alguém de férias nesse período.");
        return;
    }

    ferias.push({ nome, inicio, fim, status: "Pendente", admissao });
    salvar();
    renderFerias();
    alert("Aguardando aprovação do supervisor.");
}

function loginSupervisor() {
    const senha = document.getElementById("senhaSupervisor").value;
    if (senha === "supervisor") {
        supervisorLogado = true;
        alert("Supervisor logado.");
        renderFerias();
    } else {
        alert("Senha incorreta.");
    }
}

function aprovar(idx) {
    ferias[idx].status = "Aprovado";
    salvar();
    renderFerias();
}

function negar(idx) {
    ferias[idx].status = "Negado";
    salvar();
    renderFerias();
}

renderFerias();
</script>
</body>
</html>

